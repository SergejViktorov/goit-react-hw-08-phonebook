{"version":3,"sources":["Components/Navigation/Navigation.module.css","Components/AuthNav/AuthNav.module.css","Components/UserMenu/UserMenu.module.css","redux/actions.js","redux/operation.js","contacts/contacts-selectors.js","redux/reducers.js","Components/Container/Container.module.css","Components/AppBar.module.css","redux/auth/auth-operations.js","redux/auth/auth-slice.js","redux/auth/auth-selectors.js","Components/Container/Container.js","Components/Navigation/Navigation.js","Components/UserMenu/defaultImg/ava.svg","Components/UserMenu/UserMenu.js","Components/AuthNav/AuthNav.js","Components/AppBar.js","Components/PrivateRoute.js","Components/PublicRoute.js","App.js","redux/store.js","index.js"],"names":["module","exports","fetchPhoneBookRequest","createAction","fetchPhoneBookSuccess","fetchPhoneBookError","addContactsRequest","addContactsSuccess","addContactsError","deleteContactsRequest","deleteContactsSuccess","deleteContactsError","filter","fetchContacts","dispatch","a","axios","get","data","addContacts","item","post","deleteContacts","contactsId","delete","getContacts","state","contacts","getFilter","getVisibleContacts","createSelector","items","allContacts","normalizedFilter","toLowerCase","name","includes","itemReducer","createReducer","_","payload","id","isLoading","error","filterReducer","combineReducers","defaults","baseURL","token","headers","common","Authorization","authOperations","register","createAsyncThunk","credentials","toast","theme","rejectWithValue","logIn","logOut","fetchCurrentUser","thunkAPI","getState","persistedToken","auth","console","log","authSlice","createSlice","initialState","user","email","isLoggedIn","isFetchingCurrent","extraReducers","fulfilled","action","pending","rejected","authSelectors","getIsLoggedIn","getUserName","getIsFetchingCurrent","Container","children","className","s","container","Navigation","useSelector","to","exact","link","activeClassName","activelink","UserMenu","useDispatch","menu","src","defaultAvatar","alt","img","text","Button","variant","type","onClick","AuthNav","AppBar","heder","PrivateRoute","redirectTo","routeProps","PublicRoute","restricted","shouldRedirecy","RegisterViews","lazy","HomeViews","LoginViews","ContactsViews","App","useEffect","fallback","path","position","autoClose","closeOnClick","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","logger","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","persistReducer","authReducer","phoneBookReducer","devTools","process","persistor","persistStore","ReactDOM","render","StrictMode","loading","document","getElementById"],"mappings":"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","file":"static/js/main.97f85907.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"Navigation_link__o3dGy\",\"activelink\":\"Navigation_activelink__hKf4C\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"AuthNav_link__32KhK\",\"activelink\":\"AuthNav_activelink__1ktos\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"img\":\"UserMenu_img__296gy\",\"menu\":\"UserMenu_menu__h2cM7\",\"text\":\"UserMenu_text__3UEoZ\"};","import { createAction } from '@reduxjs/toolkit'\r\n\r\nexport const fetchPhoneBookRequest = createAction(\r\n\t'contact/fetchPhoneBookRequest'\r\n)\r\nexport const fetchPhoneBookSuccess = createAction(\r\n\t'contact/fetchPhoneBookSuccess'\r\n)\r\nexport const fetchPhoneBookError = createAction('contact/fetchPhoneBookError')\r\n\r\nexport const addContactsRequest = createAction('contact/addContactsRequest')\r\nexport const addContactsSuccess = createAction('contact/addContactsSuccess')\r\nexport const addContactsError = createAction('contact/addContactsError')\r\n\r\nexport const deleteContactsRequest = createAction(\r\n\t'contact/deleteContactsRequest'\r\n)\r\nexport const deleteContactsSuccess = createAction(\r\n\t'contact/deleteContactsSuccess '\r\n)\r\nexport const deleteContactsError = createAction('contact/deleteContactsError')\r\n\r\nexport const filter = createAction('contact/filter')\r\n","import axios from 'axios'\r\nimport {\r\n\tfetchPhoneBookRequest,\r\n\tfetchPhoneBookSuccess,\r\n\tfetchPhoneBookError,\r\n\taddContactsRequest,\r\n\taddContactsSuccess,\r\n\taddContactsError,\r\n\tdeleteContactsRequest,\r\n\tdeleteContactsSuccess,\r\n\tdeleteContactsError,\r\n} from './actions'\r\n\r\n// axios.defaults.baseURL = 'http://localhost:7777/'\r\n\r\nconst fetchContacts = () => async (dispatch) => {\r\n\tdispatch(fetchPhoneBookRequest())\r\n\ttry {\r\n\t\tconst { data } = await axios.get('/contacts')\r\n\t\tdispatch(fetchPhoneBookSuccess(data))\r\n\t} catch (error) {\r\n\t\tdispatch(fetchPhoneBookError())\r\n\t}\r\n}\r\n\r\nconst addContacts = (item) => async (dispatch) => {\r\n\tdispatch(addContactsRequest)\r\n\ttry {\r\n\t\tconst { data } = await axios.post('contacts', item)\r\n\t\tdispatch(addContactsSuccess(data))\r\n\t} catch (error) {\r\n\t\tdispatch(addContactsError())\r\n\t}\r\n}\r\n\r\nconst deleteContacts = (contactsId) => async (dispatch) => {\r\n\tdeleteContactsRequest()\r\n\ttry {\r\n\t\tawait axios.delete(`contacts/${contactsId}`)\r\n\t\tdispatch(deleteContactsSuccess(contactsId))\r\n\t} catch (error) {\r\n\t\tdispatch(deleteContactsError(error))\r\n\t}\r\n}\r\n\r\nexport default { fetchContacts, addContacts, deleteContacts }\r\n","import { createSelector } from '@reduxjs/toolkit'\r\nconst getContacts = (state) => state.contacts\r\nconst getFilter = (state) => state.contacts.filter\r\nconst getAllContacts = (state) => getContacts(state).items\r\n\r\nconst getVisibleContacts = createSelector(\r\n\t[getAllContacts, getFilter],\r\n\t(allContacts, filter) => {\r\n\t\tconst normalizedFilter = filter.toLowerCase()\r\n\t\treturn allContacts.filter((items) =>\r\n\t\t\titems.name.toLowerCase().includes(normalizedFilter)\r\n\t\t)\r\n\t}\r\n)\r\n\r\nexport default { getFilter, getVisibleContacts, getContacts }\r\n","import { combineReducers } from 'redux'\r\nimport { createReducer } from '@reduxjs/toolkit'\r\nimport {\r\n\tfetchPhoneBookRequest,\r\n\tfetchPhoneBookSuccess,\r\n\tfetchPhoneBookError,\r\n\taddContactsRequest,\r\n\taddContactsSuccess,\r\n\taddContactsError,\r\n\tdeleteContactsRequest,\r\n\tdeleteContactsSuccess,\r\n\tdeleteContactsError,\r\n\tfilter,\r\n} from './actions'\r\n\r\nconst itemReducer = createReducer([], {\r\n\t[fetchPhoneBookSuccess]: (_, { payload }) => payload,\r\n\t[addContactsSuccess]: (state, { payload }) => [...state, { ...payload }],\r\n\t[deleteContactsSuccess]: (state, { payload }) =>\r\n\t\tstate.filter(({ id }) => id !== payload),\r\n})\r\n\r\nconst isLoading = createReducer(false, {\r\n\t[fetchPhoneBookRequest]: () => true,\r\n\t[fetchPhoneBookSuccess]: () => false,\r\n\t[fetchPhoneBookError]: () => false,\r\n\t[addContactsRequest]: () => true,\r\n\t[addContactsSuccess]: () => false,\r\n\t[addContactsError]: () => false,\r\n\t[deleteContactsRequest]: () => true,\r\n\t[deleteContactsSuccess]: () => false,\r\n\t[deleteContactsError]: () => false,\r\n})\r\n\r\nconst error = createReducer(null, {})\r\n// const error = createReducer(null, {\r\n// \t[actions.fetchPhoneBookError]: (_, action) => action.payload,\r\n// \t[actions.fetchPhoneBookRequest]: () => null,\r\n// })\r\n\r\nconst filterReducer = createReducer('', {\r\n\t[filter]: (_, { payload }) => payload,\r\n})\r\n\r\nexport default combineReducers({\r\n\titems: itemReducer,\r\n\tisLoading,\r\n\terror,\r\n\tfilter: filterReducer,\r\n})\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__2Z3gC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"heder\":\"AppBar_heder__2qIKS\"};","import axios from 'axios'\r\nimport { createAsyncThunk } from '@reduxjs/toolkit'\r\nimport { toast } from 'react-toastify'\r\n\r\naxios.defaults.baseURL = `https://connections-api.herokuapp.com`\r\n\r\nconst token = {\r\n\tset(token) {\r\n\t\taxios.defaults.headers.common.Authorization = `Bearer ${token}`\r\n\t},\r\n\tunset() {\r\n\t\taxios.defaults.headers.common.Authorization = ''\r\n\t},\r\n}\r\n\r\nconst register = createAsyncThunk('auth/register', async (credentials) => {\r\n\ttry {\r\n\t\tconst { data } = await axios.post('/users/signup', credentials)\r\n\t\ttoken.set(data.token)\r\n\t\treturn data\r\n\t} catch ({ data }) {\r\n\t\t// console.log('error123', error.response.data)\r\n\t\ttoast.error(\r\n\t\t\t{ data },\r\n\t\t\t{\r\n\t\t\t\ttheme: 'colored',\r\n\t\t\t}\r\n\t\t)\r\n\t\treturn createAsyncThunk.rejectWithValue()\r\n\t}\r\n})\r\n\r\nconst logIn = createAsyncThunk('auth/login', async (credentials) => {\r\n\ttry {\r\n\t\tconst { data } = await axios.post('/users/login', credentials)\r\n\t\ttoken.set(data.token)\r\n\t\treturn data\r\n\t} catch ({ data }) {\r\n\t\ttoast.error(\r\n\t\t\t{ data },\r\n\t\t\t{\r\n\t\t\t\ttheme: 'colored',\r\n\t\t\t}\r\n\t\t)\r\n\t\treturn createAsyncThunk.rejectWithValue()\r\n\t}\r\n})\r\n\r\nconst logOut = createAsyncThunk('auth/logout', async () => {\r\n\ttry {\r\n\t\tawait axios.post('/users/logout')\r\n\t\ttoken.unset()\r\n\t} catch (error) {}\r\n})\r\n\r\nconst fetchCurrentUser = createAsyncThunk(\r\n\t'auth/refresh',\r\n\tasync (_, thunkAPI) => {\r\n\t\tconst state = thunkAPI.getState()\r\n\t\tconst persistedToken = state.auth.token\r\n\r\n\t\tif (persistedToken === null) {\r\n\t\t\tconsole.log('Токена нет, уходим из fetchCurrentUser')\r\n\t\t\treturn thunkAPI.rejectWithValue()\r\n\t\t}\r\n\r\n\t\ttoken.set(persistedToken)\r\n\t\ttry {\r\n\t\t\tconst { data } = await axios.get('/users/current')\r\n\t\t\treturn data\r\n\t\t} catch (error) {}\r\n\t}\r\n)\r\n\r\nconst authOperations = {\r\n\tregister,\r\n\tlogIn,\r\n\tlogOut,\r\n\tfetchCurrentUser,\r\n}\r\nexport default authOperations\r\n","import { createSlice } from '@reduxjs/toolkit'\r\nimport authOperations from './auth-operations'\r\n\r\nconst initialState = {\r\n\tuser: { name: null, email: null },\r\n\ttoken: null,\r\n\tisLoggedIn: false,\r\n\tisFetchingCurrent: false,\r\n}\r\n\r\nconst authSlice = createSlice({\r\n\tname: 'auth',\r\n\tinitialState,\r\n\textraReducers: {\r\n\t\t[authOperations.register.fulfilled](state, action) {\r\n\t\t\tstate.user = action.payload.user\r\n\t\t\tstate.token = action.payload.token\r\n\t\t\tstate.isLoggedIn = true\r\n\t\t},\r\n\r\n\t\t[authOperations.logIn.fulfilled](state, action) {\r\n\t\t\tstate.user = action.payload.user\r\n\t\t\tstate.token = action.payload.token\r\n\t\t\tstate.isLoggedIn = true\r\n\t\t},\r\n\r\n\t\t[authOperations.logOut.fulfilled](state, action) {\r\n\t\t\tstate.user = { name: null, email: null }\r\n\t\t\tstate.token = null\r\n\t\t\tstate.isLoggedIn = false\r\n\t\t},\r\n\t\t[authOperations.fetchCurrentUser.pending](state) {\r\n\t\t\tstate.isFetchingCurrent = true\r\n\t\t},\r\n\t\t[authOperations.fetchCurrentUser.fulfilled](state, action) {\r\n\t\t\tstate.user = action.payload\r\n\t\t\tstate.isLoggedIn = true\r\n\t\t\tstate.isFetchingCurrent = false\r\n\t\t},\r\n\t\t[authOperations.fetchCurrentUser.rejected](state) {\r\n\t\t\tstate.isFetchingCurrent = false\r\n\t\t},\r\n\t},\r\n})\r\n\r\nexport default authSlice.reducer\r\n","const getIsLoggedIn = (state) => state.auth.isLoggedIn\r\nconst getUserName = (state) => state.auth.user.name\r\nconst getIsFetchingCurrent = (state) => state.auth.isFetchingCurrent\r\n\r\nconst authSelectors = {\r\n\tgetIsLoggedIn,\r\n\tgetUserName,\r\n\tgetIsFetchingCurrent,\r\n}\r\nexport default authSelectors\r\n","import s from './Container.module.css'\r\n\r\nexport default function Container({ children }) {\r\n\treturn <div className={s.container}>{children}</div>\r\n}\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { NavLink } from 'react-router-dom'\r\nimport s from './Navigation.module.css'\r\nimport { authSelectors } from '../../redux/auth'\r\nfunction Navigation() {\r\n\tconst isLoggedIn = useSelector(authSelectors.getIsLoggedIn)\r\n\treturn (\r\n\t\t<nav>\r\n\t\t\t<NavLink to=\"/\" exact className={s.link} activeClassName={s.activelink}>\r\n\t\t\t\tГлавная\r\n\t\t\t</NavLink>\r\n\t\t\t{isLoggedIn && (\r\n\t\t\t\t<NavLink\r\n\t\t\t\t\texact\r\n\t\t\t\t\tto=\"/contacts\"\r\n\t\t\t\t\tclassName={s.link}\r\n\t\t\t\t\tactiveClassName={s.activelink}\r\n\t\t\t\t>\r\n\t\t\t\t\tКонтакты\r\n\t\t\t\t</NavLink>\r\n\t\t\t)}\r\n\t\t</nav>\r\n\t)\r\n}\r\nexport default Navigation\r\n","export default __webpack_public_path__ + \"static/media/ava.add6a313.svg\";","import { useDispatch, useSelector } from 'react-redux'\r\nimport { authOperations, authSelectors } from '../../redux/auth'\r\nimport defaultAvatar from './defaultImg/ava.svg'\r\nimport s from './UserMenu.module.css'\r\nimport { Button } from 'react-bootstrap'\r\nfunction UserMenu() {\r\n\tconst dispatch = useDispatch()\r\n\tconst name = useSelector(authSelectors.getUserName)\r\n\treturn (\r\n\t\t<div className={s.menu}>\r\n\t\t\t<img src={defaultAvatar} alt=\"avatar\" className={s.img}></img>\r\n\t\t\t<span className={s.text}>Добро пожаловать {name}</span>\r\n\t\t\t<Button\r\n\t\t\t\tvariant=\"primary\"\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tonClick={() => dispatch(authOperations.logOut())}\r\n\t\t\t>\r\n\t\t\t\tВыход\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t)\r\n}\r\nexport default UserMenu\r\n","import React from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport s from './AuthNav.module.css'\r\n\r\nfunction AuthNav() {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<NavLink\r\n\t\t\t\tto=\"/register\"\r\n\t\t\t\texact\r\n\t\t\t\tclassName={s.link}\r\n\t\t\t\tactiveClassName={s.activelink}\r\n\t\t\t>\r\n\t\t\t\tРегистрация\r\n\t\t\t</NavLink>\r\n\t\t\t<NavLink\r\n\t\t\t\tto=\"/login\"\r\n\t\t\t\texact\r\n\t\t\t\tclassName={s.link}\r\n\t\t\t\tactiveClassName={s.activelink}\r\n\t\t\t>\r\n\t\t\t\tЛогин\r\n\t\t\t</NavLink>\r\n\t\t</div>\r\n\t)\r\n}\r\nexport default AuthNav\r\n","import { useSelector } from 'react-redux'\r\nimport Navigation from './Navigation/Navigation'\r\nimport UserMenu from './UserMenu/UserMenu'\r\nimport s from './AppBar.module.css'\r\nimport AuthNav from './AuthNav/AuthNav'\r\nimport { authSelectors } from '../redux/auth'\r\n\r\nfunction AppBar() {\r\n\tconst isLoggedIn = useSelector(authSelectors.getIsLoggedIn)\r\n\tconsole.log('isLoggedIn', isLoggedIn)\r\n\r\n\treturn (\r\n\t\t<header className={s.heder}>\r\n\t\t\t<Navigation />\r\n\t\t\t{isLoggedIn ? <UserMenu /> : <AuthNav />}\r\n\t\t</header>\r\n\t)\r\n}\r\nexport default AppBar\r\n","import { useSelector } from 'react-redux'\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport { authSelectors } from '../redux/auth'\r\n// import authSlice from '../redux/auth/auth-slice'\r\n\r\nexport default function PrivateRoute({\r\n\t// component: Component,\r\n\tredirectTo = '/',\r\n\tchildren,\r\n\t...routeProps\r\n}) {\r\n\tconst isLoggedIn = useSelector(authSelectors.getIsLoggedIn)\r\n\treturn (\r\n\t\t<Route {...routeProps}>\r\n\t\t\t{isLoggedIn ? children : <Redirect to={redirectTo} />}\r\n\t\t</Route>\r\n\t)\r\n}\r\n","import { useSelector } from 'react-redux'\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport { authSelectors } from '../redux/auth'\r\n\r\nexport default function PublicRoute({\r\n\tchildren,\r\n\trestricted = false,\r\n\tredirectTo = '/',\r\n\t...routeProps\r\n}) {\r\n\tconst isLoggedIn = useSelector(authSelectors.getIsLoggedIn)\r\n\tconst shouldRedirecy = isLoggedIn && restricted\r\n\treturn (\r\n\t\t<Route {...routeProps}>\r\n\t\t\t{shouldRedirecy ? <Redirect to={redirectTo} /> : children}\r\n\t\t</Route>\r\n\t)\r\n}\r\n","import { useEffect, Suspense, lazy } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport Container from './Components/Container/Container'\nimport { Switch } from 'react-router-dom'\nimport AppBar from './Components/AppBar'\nimport { authOperations, authSelectors } from './redux/auth'\nimport PrivateRoute from './Components/PrivateRoute'\nimport PublicRoute from './Components/PublicRoute'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport { ToastContainer } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\n\nconst RegisterViews = lazy(() =>\n\timport('./views/RegisterViews.js' /* webpackChunkName: \"RegisterViews\" */)\n)\nconst HomeViews = lazy(() =>\n\timport('./views/HomeViews.js' /* webpackChunkName: \"HomeView\" */)\n)\nconst LoginViews = lazy(() =>\n\timport('./views/LoginViews.js' /* webpackChunkName: \"LoginViews\" */)\n)\nconst ContactsViews = lazy(() =>\n\timport('./views/ContactsViews.js' /* webpackChunkName: \"ContactsViews\" */)\n)\n\nfunction App() {\n\tconst dispatch = useDispatch()\n\tconst isFetchingCurrent = useSelector(authSelectors.getIsFetchingCurrent)\n\n\tuseEffect(() => {\n\t\tdispatch(authOperations.fetchCurrentUser())\n\t}, [dispatch])\n\treturn (\n\t\t!isFetchingCurrent && (\n\t\t\t<Container>\n\t\t\t\t<AppBar />\n\n\t\t\t\t<Switch>\n\t\t\t\t\t<Suspense fallback={<p>...Загружаем</p>}>\n\t\t\t\t\t\t<PublicRoute exact path=\"/\">\n\t\t\t\t\t\t\t<HomeViews />\n\t\t\t\t\t\t</PublicRoute>\n\n\t\t\t\t\t\t<PublicRoute exact path=\"/register\" restricted>\n\t\t\t\t\t\t\t<RegisterViews />\n\t\t\t\t\t\t</PublicRoute>\n\n\t\t\t\t\t\t<PublicRoute exact path=\"/login\" restricted redirectTo=\"/contacts\">\n\t\t\t\t\t\t\t<LoginViews />\n\t\t\t\t\t\t</PublicRoute>\n\n\t\t\t\t\t\t<PrivateRoute path=\"/contacts\" redirectTo=\"/login\">\n\t\t\t\t\t\t\t<ContactsViews />\n\t\t\t\t\t\t</PrivateRoute>\n\t\t\t\t\t</Suspense>\n\t\t\t\t</Switch>\n\t\t\t\t<ToastContainer position=\"top-right\" autoClose={4000} closeOnClick />\n\t\t\t</Container>\n\t\t)\n\t)\n}\n\nexport default App\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit'\r\nimport {\r\n\tpersistStore,\r\n\tpersistReducer,\r\n\tFLUSH,\r\n\tREHYDRATE,\r\n\tPAUSE,\r\n\tPERSIST,\r\n\tPURGE,\r\n\tREGISTER,\r\n} from 'redux-persist'\r\n\r\nimport logger from 'redux-logger'\r\nimport storage from 'redux-persist/lib/storage'\r\nimport { phoneBookReducer } from '../redux'\r\nimport { authReducer } from './auth'\r\n\r\nconst middleware = [\r\n\t...getDefaultMiddleware({\r\n\t\tserializableCheck: {\r\n\t\t\tignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n\t\t},\r\n\t}),\r\n\tlogger,\r\n]\r\n\r\nconst authPersistConfig = {\r\n\tkey: 'auth',\r\n\tstorage,\r\n\twhitelist: ['token'],\r\n}\r\n\r\nexport const store = configureStore({\r\n\treducer: {\r\n\t\tauth: persistReducer(authPersistConfig, authReducer),\r\n\t\tcontacts: phoneBookReducer,\r\n\t},\r\n\tmiddleware,\r\n\tdevTools: process.env.NODE_ENV === 'development',\r\n})\r\n\r\nexport const persistor = persistStore(store)\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport { PersistGate } from 'redux-persist/integration/react'\nimport App from './App'\nimport { store, persistor } from './redux/store'\nimport 'modern-normalize/modern-normalize.css'\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<Provider store={store}>\n\t\t\t<PersistGate loading={null} persistor={persistor}>\n\t\t\t\t<BrowserRouter>\n\t\t\t\t\t<App />\n\t\t\t\t</BrowserRouter>\n\t\t\t</PersistGate>\n\t\t</Provider>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n)\n"],"sourceRoot":""}